# Base data

Starting registers:

```
r0:   4
r1:   1
r2:   3
r3:  10
r4: 101
r5:   0
r6:   0
r7: ???
```

PCs used with counts:
```
6027:  1486
6035:   830
6048:   821
6050:   821
6054:   821
6038:     9
6042:     9
6045:     9
6030:   656
6034:   656
6047:     7
6056:   656
6059:   655
6061:   655
6065:   655
6067:   654
```

Disassembly:
```
6027   jt   r0 6035
6030   add  r0 r1 1
6034   ret  
6035   jt   r1 6048
6038   add  r0 r0 32767
6042   set  r1 r7
6045   call 6027
6047   ret  
6048   push r0
6050   add  r1 r1 32767
6054   call 6027
6056   set  r1 r0
6059   pop  r0
6061   add  r0 r0 32767
6065   call 6027
6067   ret  
```
# Decompilations

## V0

```
start:
  goto 6035 if r0 != 0
  r0 = r1 + 1
  return
6035:
  goto 6048 if r1 != 0
  r0 += 32767
  r1 = r7
  call start
  return
6048:
  push r0
  r1 += 32767
  call start
  r1 = r0
  r0 = pop
  r0 += 32767
  call start
  return
```

## V1

```
void start() {
  if (r0 == 0) {
    r0 = r1 + 1;
    return;
  }
  if (r1 == 0) {
    r0--;
    r1 = r7;
    start();
    return;
  }
  push(r0);
  r1--;
  start();
  r1 = r0;
  r0 = pop() - 1;
  start();
  return;
}
```

## V2

```
void start() {
  if (a == 0) {
    a = b + 1;
    return;
  }
  if (b == 0) {
    a--;
    b = r7;
    start();
    return;
  }
  c = a;
  b--;
  start();
  b = a;
  a = c - 1;
  start();
  return;
}

a = 4;
b = 1;
start();
```

## V3

```
int f(a, b) {
  if (a == 0) {
    return b + 1;
  } else if (b == 0) {
    return f(a - 1, r7);
  } else {
    c = f(a, b - 1)
    return f(a - 1, c);
  }
}

f(4, 1);
```

## V4

```
f(0, y) = y + 1
f(x, 0) = f(x - 1, r7)
f(x, y) = f(x - 1, f(x, y - 1))
f(4, 1)
```

# Tests

## r7 = 2

f(0, b) = b + 1
f(1, 0) = f(0, 1) = 2
f(1, 1) = f(0, 2) = 3
f(1, b) = b + 2
f(2, 0) = f(1, 1) = 3
f(2, 1) = f(1, 3) = 5
f(2, 2) = f(1, 5) = 7
f(2, b) = 2b + 3
f(3, 0) = f(2, 1) = 5
f(3, 1) = f(2, 5) = 13
f(3, 2) = f(2, 13) = 29
f(3, 3) = f(2, 29) = 61
f(3, b) = 2^(b+3) - 3
f(4, 0) = f(3, 1) = 13
f(4, 1) = f(3, 13) = 65533 ~ 32765

Can't calculate analytically, cuz we quickly hit intmax!

## r7 = 2

f(0, b) = b + 2
f(1, 0) = f(0, 1) = 3
f(1, 1) = f(0, 3) = 5


# After calculation

Looks like we want our answer to be 6

```
5491   eq   r1 r0 6          r=[32765 1     3     10    101   0     0     1    ]  #st=11
5495   jf   r1 5579          r=[32765 0     3     10    101   0     0     1    ]  #st=11
5579   push r0               r=[32765 0     3     10    101   0     0     1    ]  #st=11
5581   push r1               r=[32765 0     3     10    101   0     0     1    ]  #st=12
5583   push r2               r=[32765 0     3     10    101   0     0     1    ]  #st=13
5585   set  r0 29400         r=[32765 0     3     10    101   0     0     1    ]  #st=14
5588   set  r1 1531          r=[29400 0     3     10    101   0     0     1    ]  #st=14
5591   add  r2 6148 12278    r=[29400 1531  3     10    101   0     0     1    ]  #st=14
5595   call 1458             r=[29400 1531  18426 10    101   0     0     1    ]  #st=14
1458   push r0               r=[29400 1531  18426 10    101   0     0     1    ]  #st=15
1460   push r3               r=[29400 1531  18426 10    101   0     0     1    ]  #st=16
1462   push r4               r=[29400 1531  18426 10    101   0     0     1    ]  #st=17
1464   push r5               r=[29400 1531  18426 10    101   0     0     1    ]  #st=18
1466   push r6               r=[29400 1531  18426 10    101   0     0     1    ]  #st=19
1468   set  r6 r0            r=[29400 1531  18426 10    101   0     0     1    ]  #st=20
1471   set  r5 r1            r=[29400 1531  18426 10    101   0     29400 1    ]  #st=20
1474   rmem r4 r0            r=[29400 1531  18426 10    101   1531  29400 1    ]  #st=20
1477   set  r1 0             r=[29400 1531  18426 10    144   1531  29400 1    ]  #st=20
1480   add  r3 1 r1          r=[29400 0     18426 10    144   1531  29400 1    ]  #st=20
1484   gt   r0 r3 r4         r=[29400 0     18426 1     144   1531  29400 1    ]  #st=20
1488   jt   r0 1507          r=[0     0     18426 1     144   1531  29400 1    ]  #st=20
1491   add  r3 r3 r6         r=[0     0     18426 1     144   1531  29400 1    ]  #st=20
1495   rmem r0 r3            r=[0     0     18426 29401 144   1531  29400 1    ]  #st=20
1498   call r5               r=[18363 0     18426 29401 144   1531  29400 1    ]  #st=20
1531   push r1               r=[18363 0     18426 29401 144   1531  29400 1    ]  #st=21
1533   set  r1 r2            r=[18363 0     18426 29401 144   1531  29400 1    ]  #st=22
1536   call 2125             r=[18363 18426 18426 29401 144   1531  29400 1    ]  #st=22
2125   push r1               r=[18363 18426 18426 29401 144   1531  29400 1    ]  #st=23
2127   push r2               r=[18363 18426 18426 29401 144   1531  29400 1    ]  #st=24
2129   and  r2 r0 r1         r=[18363 18426 18426 29401 144   1531  29400 1    ]  #st=25
2133   not  r2 r2            r=[18363 18426 18362 29401 144   1531  29400 1    ]  #st=25
2136   or   r0 r0 r1         r=[18363 18426 14405 29401 144   1531  29400 1    ]  #st=25
2140   and  r0 r0 r2         r=[18427 18426 14405 29401 144   1531  29400 1    ]  #st=25
2144   pop  r2               r=[65    18426 14405 29401 144   1531  29400 1    ]  #st=25
2146   pop  r1               r=[65    18426 18426 29401 144   1531  29400 1    ]  #st=24
```